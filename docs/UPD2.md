
# UPD 2.0

- Формула для корректного расчёта полёта projectile скилов (wind strike, forse blaster и т.д.).
Что даёт: теперь у вас будет возможность получить урон от магии не через 0.4 сек как обычно, а через время завязанное на дистанции что логично ибо на дальние дистанции, скилы летят дольше чем в ближнем бою. А ещё, вы можете убить друг друга одновременно лол ;D пока вражеский projectile до вас летит и вы успели скастануть свой, раньше было невозможно из-за скорости каста и хиттайма скилов который не мог быть ниже 500 ms.
projectile skill переменная, для обозначения, что заклинание или скилл имеет flyTime.
- toggle reuse (если reuseDelay установлен у скилов Toggle типа, то их откат начинается после отмены toggle эффекта)
- alignment скилов указывается в xml скилов.
  - `(!) isMagic = EAlignment.MAGIC`
  - `(!) isAbility = EAlignment.ABILITY и т.д.`

- Stats больше не учитывает case стринги и имеет имя = Enum значению, Т.е. вы можете писать любым способом из представленных ниже:
  - `<mul order="0x30" stat="PATKSPD" val="1.05"/>`
  - `<mul order="0x30" stat="pAtKsPd" val="1.05"/>`

- Добавление политики для инвентаря, теперь можно манипулировать разрешениями на equip/unequip
- Удаление джула (старой отладки)
- Система физ. атак вынесена во внешний спектр
- система каста вынесена во внешний спектр
- енумы вынесены в овнешний спектр
- переход на логирование slf4j полностью детка
- arrowReloadSpd теперь является полноценным статом и добавляется фанком к игроку. Зависит от DEX.
- эффекты Poison & Bleed
  - (!) Согласно моим убеждениям, Bleed наносит урон **каждую секунду** с силой oldDamage / 3. Когда Poison наносит oldDamage **каждые 3 секунды**.
- Теперь, Resist Poison - снижает получаемый урон от ядов, а не шанс получить его
- Теперь, Resist Bleed - снижает получаемый урон от кровотоков, а не шанс получить его
- Хил скилы теперь действуют на нежить - нанося ей урон
  - На боссов, PERCENT хил действует в зависимости от максимального ХП кастера, а не босса.
- pAtkSpd и mAtkSpd теперь работают как делители и ускоряют перезарядку скилов по формуле делителя а не множителя на 0.N.
- Яды наложенные на мёртвых - теперь восстанавливают им ХП вместо нанесения урона
- Массовые способности изменились в механике
- Добавлен стат и обработка AoeDamage увеличивающий илии понижающий урон о тАоЕ скилов
- АоЕ скилы наносят больше доп. урона если жертвы находятся ближе к эпицентру
- От АоЕ скилов больше нельзя уклониться или отразить их, но по прежнему защитится щитом
- Переработка EffectResistance системы
  - Теперь есть 2 стата: Resist/Defense
    - Resist = снижает вероятность прохождения (Lion Heart)
    - Defense = снижает время действия эффекта
    - Ходовым является Defence, следующие способности были переработаны (включая и alignment скилов)
- Изменения в скилах:
![](http://fin-ex.ru/github_skillchanges.png)
![](http://fin-ex.ru/github_types.png)
- Система Parry (физ. атак и скилов)
  - Срабатывает только во фронте к цели (лицом)
  - Прибавляет к величине defence доп. значение зависящее от атаки вашего оружия которым было совершено парирование
  - У парного оуржия (кастетов и дуалов) вероятность парированяи увеличивается на 5% дополнительно
  - Парирование скилов является только если они projectile
  - Если в руках нет оружия то парирование не возможно
  - Мобы тоже умеют парировать атаки, если в руках - вейпон (указание в xml rightHand)
- Система мастерства персонажа (таланты)
  - Каждый N уровень, игрок получает очко LP (Lineage Point) уровни устанавливаются в конфигах
  - Action command вызова HTML мастерства - лежит в Alt+C
  - Добавить новые аталнты можно через talent_branches.json для нужной профы
  - Таланты открываются только со второй профы
  - При снижении уровней таланты никуда не деваются
  - Необходимо залить character_lineage.sql для корректного сохранения текущих атлантов
  - При взятии сабкласса, таланты скидываются и получается новый спек о ттекущей профы
  - У некоторых талантов есть ограничители в виде уровней или "надо изучить N талант для изучения данного"
  - Функция сброса всех талантов
    - Каждый раз сбрасывая таланты, стоимость следующего сброса увеличивается в 2 раза. Например:
    - 1 сброс = 5000 SP
    - 2 сброс = 10000 SP
    - 3 сброс = 20000 SP
    - 4 сброс = 40000 SP и т.д.
    - Максимальный сброс = Integer.MAX_VALUE
  - В конфигах вы можете настроить, что требует сброс - items, SP или бесплатно.
  - Стоимость сброса индивидуально у всех сабклассов чара.
- Первые mastery для Duelist на проверку и тест, по ходу дела будет дополняться
- Система комбо прокакчки для соло игроков (в пати не работает)
  - Каждый убитый моб даёт +1 к комбо
  - Каждая единица комбо увеличивает получаемый опыт о тследующего убийства на 1%
  - Кол-во комбинаций ограничено до Short.MAX_VALUE
- Квестовые реварды для следующих квестов выведены в дату, т.е. вы сможете менять награду или добавлять новую самолично (менять в json/quest_data.json). Пока пересмотрены следующие квесты и их награды
- Фикс багов прошлого*
- Система событий (не ещё не полный переход на неё)
- Первые тестовые таланты у профессии Gladiator
  - Parry
  - Triple Slasher
  - Disarm
  - Dual Wield
  - Confrontation
  - Dual Redirection
  - Heavy Grip
  - Dual Master
- Переработка механики Shield of Revenge: В течение 5 минут позволяет отражать урон от атак в ближнем бою projectile заклинание и возвращать его врагу.
   - Тормозит рыцаря на 1 секунду не позволяя делать какие либо действия.
   - Во время стопинга отражает спелл обратно.
   - Урон от отраженного спела наносится только спустя N времени как и в оффициальном касте скила flyTime.

### Client
- текстуры v1c01.utx
- удалить 2k19.utx из клиента
- модификация skillname.dat
- модификация skillsound.dat
- модификация skillgrp.dat
- Модификация interface.u