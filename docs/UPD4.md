# UPD 4.0

## Client
* Модели QuestBoard
* Текустуры Quest Board
* SystemMessages

[Patch(System)](https://drive.google.com/file/d/1r0rG3bdZxdg8Np14XrYZmSFCoWJt6Hfm/view?usp=sharing)

## Server
* Фикс бага со слушателями oNEquip/unequip
* Добавлен метод removeTarget у Creature, теперь просто дёргаем его и целевой статус бсрасывается
* Дорабатываем NPC под рандомный квест генератор
* Фикс бага с талантом клада Dual Sword Mastery, не убирал потребление МП для скила Riposte Stance.
* Фикс бага с открытием листа талантов для гладиатора, ошибка из-за неверног оенум имени класса
* Заливка RND Quest Generator (beta)
* Добавлен Rnd.calcGuarantee - гарантированный рандом, который производит итерацию и возвращает элемент из списка/массива. Для примера:
У нас есть 5 вещей, каждую из вещей нужно проверить на случайный шанс дропа и при этом, последняя вещь всегда будет 100% выпадать. Калькуляция расчитывает рандом для каждой вещи исходя из 100 / кол-во вещей и получает шанс для первой вещи в 20%, 40% для второй 60% для третей и т.д.

### Random Quest Generator
* Игрок может взять квест который генерируется рандомно в каждом городе под каждый грейд
* Случайные квесты генерируемые на quest board применяют 4 типа:
1. Boss Hunt
2. Deliver
3. Killing Monsters
4. Resource Finder
Каждый из типов имеет собственную задачу, которую игрок - взявший квест должен реализовать.

* Каждый квест индивидуален и распространяется на одну игровую инстанцию, т.е. один квест может выполняться только одним игроком.
* При отменен квеста, игрок получает штраф 10-ти минутный на подбор новых квестов
* Квесты генерируются каждый день в 18:00 либо при запуске сервера
* TODO: функцию позволяющую выполнять квест несколькими игроками (shared)
* За каждый квест выдаётся собственная награда в зависимости от его типа.
* В каждом городе стоят quest board у которых можно взят ьэти квесты.

Например за Boss Hunt игрок получает Coin of Slayer в кол-ве 1 штука.

![](https://img-host.ru/dq6q.png)
![](https://img-host.ru/d7QN.png)
![](https://img-host.ru/gG80.png)
